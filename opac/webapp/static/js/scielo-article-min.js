var Article={TopBinder:[],Init:function(){var e=$("#articleText"),t=e.offset(),i=$(".articleMenu").width();$(".articleSection",e);$(".ModalTables").on("shown.bs.modal",function(){var e=$(".modal-body",this),t=$("table",e),i=e.outerWidth(),a=t.outerWidth();e.is("cached")||(t.addClass("table"),a>i?t.addClass("autoWidth"):t.removeClass("autoWidth")),e.addClass("cached")}),$(".ref").on("mouseenter mouseleave",function(e){var t=$(this),i=$(".xref",t),a=i.next("span:eq(0)"),n=t.position(),l=(i.outerHeight(),n.left),o=t.closest("li");"mouseenter"===e.type?(o.length>0&&o.addClass("zindexFix"),a.removeClass("closed").addClass("opened").css({left:l>300?-l/3:0}).fadeIn("fast")):(o.length>0&&o.removeClass("zindexFix"),a.removeClass("opened").addClass("closed"))}),$(".thumb").on("mouseenter mouseleave",function(e){var t=$(this).parent().parent().find(".preview");"mouseenter"==e.type?t.fadeIn("fast"):"mouseleave"==e.type&&t.fadeOut("fast")}),$(".ModalTables").on("shown.bs.modal",function(){0==$("table td[colspan], table td[rowspan]",this).length&&$("table",this).addClass("table-hover")}),$(".collapseTitle").on("click",function(){var e=$(this).next(),t=$(this).find(".collapseIcon");e.is(":visible")?(e.slideUp("fast"),t.removeClass("opened")):(e.slideDown("fast"),t.addClass("opened"))}),$(".expandReduceText").on("click",function(e){e.preventDefault();var t=$("#articleText .ref"),i=$("#articleText .text"),a=$(this).data("expandreducetext");void 0===$(this).data("defaultwidth")&&$(this).data("defaultwidth",i.outerWidth()),1==a?(t.hide(),i.outerWidth("100%"),$(this).data("expandreducetext",!1)):(i.width(""),t.show(),$(this).data("expandreducetext",!0));var n=$(window).scrollTop();setTimeout(function(){Article.ArticleStructureBuilder(),Article.ArticleStructureSelect(n)},100)}),$(".articleTxt .xref:not(.big)").on("click",function(){var e=$(this).text();$(".ref-list");-1==e.indexOf(",")?(parseInt(e),e--):(e=(e=e.split(","))[0],parseInt(e),e--)}),Article.ArticleStructureBuilder(),t.top=t.top-25;var a=e.outerHeight(),n=$(".articleMenu").height();if(window.setTimeout(function(){n=$(".articleMenu").height()},200),$(window).scroll(function(){var e=$(window).scrollTop();e>t.top?($(".articleMenu").addClass("fixed").width(i),e>a+t.top-n-46?$(".articleMenu").addClass("fixedBottom"):$(".articleMenu").removeClass("fixedBottom")):$(".articleMenu").removeClass("fixed"),Article.ArticleStructureSelect(e),$(".alternativeHeader").stop(!1,!1)}),""!=window.location.hash){var l=window.location.hash,o=window.scrollY;$(l).modal("toggle").on("hidden.bs.modal",function(){window.location.hash="",$("body,html").scrollTop(o)})}$("[data-toggle='modal']").on("click",function(){var e=$(this).data("target"),t=window.scrollY;"undefined"==e&&""==e||(window.location.hash=e),$(e).on("hidden.bs.modal",function(){window.location.hash="",$("body,html").scrollTop(t)})});var d=$(".downloadOptions li.group"),r=100/d.length;d.css("width",r+"%"),Article.fechaAutores()},ArticleStructureBuilder:function(){var e=$(".articleMenu"),t=$("#articleText .articleSection"),i=0,a="";Article.TopBinder=[],t.each(function(){var e=$(this).data("anchor"),t=$(this).find(".articleSectionTitle"),n=$(this).offset();if(0==$(this).find("a[name='articleSection"+i+"']").length&&$(this).prepend("<a name='articleSection"+i+"'></a>"),0==i?Article.TopBinder.push(0):Article.TopBinder.push(n.top),void 0===e)return!0;if(a+="<li "+(0==i?'class="selected"':"")+">",a+='\t<a href="#articleSection'+i+'">'+e+"</a>",t.length>1){var l=0;a+="<ul>",t.each(function(){var e=$(this).offset();Article.TopBinder.push(e.top),0==$(this).prev("a[name='as"+i+"-heading"+l+"']").length&&$(this).before("<a name='as"+i+"-heading"+l+"'></a>"),a+="<li>",a+='\t<a href="#as'+i+"-heading"+l+'">'+$(this).text()+"</a>",a+="</li>",l++}),a+="</ul>"}a+="</li>",i++}),e.html(a),$("a",e).on("click",function(e){e.preventDefault();var t=$(this).attr("href");t=t.replace("#","");var i=$("a[name="+t+"]").offset();$("html,body").animate({scrollTop:i.top-60},500)})},ArticleStructureSelect:function(e){for(var t=$(".articleMenu"),i=0,a=Article.TopBinder.length;i<a;i++){if(i==a-1&&e>=Article.TopBinder[i]-100){t.find("li").removeClass("selected"),t.find("li:eq("+i+")").addClass("selected");break}if(e<=Article.TopBinder[i]-100){t.find("li").removeClass("selected"),t.find("li:eq("+(i-1)+")").addClass("selected");break}}},Bindings:function(e){void 0===e&&(e=".article")},fechaAutores:function(){var e=document.querySelector(".contribGroup"),t=e,i=t.querySelectorAll(".dropdown"),a=i.length;if(a>=10){var n=t.querySelector(".outlineFadeLink"),l=i[0],o=i[a-1],d=document.createElement("a");d.textContent="[...]",d.style.padding="10px",d.style.cursor="pointer";var r=document.createElement("div"),s=document.createElement("a");s.classList.add("btn-fechar");var c=document.createElement("span");c.classList.add("sci-ico-floatingMenuClose"),s.appendChild(c),r.appendChild(s);var h=document.createElement("div");h.appendChild(l),h.appendChild(d),h.appendChild(o),h.appendChild(n),e.textContent="",e.appendChild(h),d.addEventListener("click",function(){e.textContent="";for(var t=0;t<a;t++)e.appendChild(i[t]);e.appendChild(n),e.appendChild(r)}),s.addEventListener("click",function(){Article.fechaAutores()})}e.style.opacity="1"}};$(function(){$("body.article").length&&Article.Init()});